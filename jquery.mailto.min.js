$.fn.mailto=function(a){a=$.extend({},{text:false,host:window.location.hostname.replace("www.",""),account:false,prepend:false},a);$(this).each(function(){var d=$(this);var c=$.extend({},a,d.data());var f=function(){var g="";if(c.account){return c.account+"@"+c.host}else{var h=d.text();d.contents().filter(function(){return this.nodeType!=1}).remove();return h.replace(" at ","@").split(" dot ").join(".")}return g};var b=f();if(!c.text){c.text=b}if(c.prepend){d.prepend(c.text+" ")}else{d.append(" "+c.text)}if(d.is("a")){var e="mailto:"+b;if(c.subject){e+="?subject="+encodeURIComponent(c.subject)}d.attr("href",e)}})};